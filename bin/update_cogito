#!/usr/bin/env bash

read -rp "Update system channels (requires sudo) [y/n]? " ans
if [[ $ans == "y" ]]; then
    sudo nix-channel --update nixos nixos-hardware
fi

read -rp "Rebuild the system (requires sudo) [y/n]? " ans
if [[ $ans == "y" ]]; then
    sudo nixos-rebuild switch
fi

read -rp "Update user channels [y/n]? " ans
if [[ $ans == "y" ]]; then
    nix-channel --update home-manager nixos
fi

read -rp "Rebuild the user profile [y/n]? " ans
if [[ $ans == "y" ]]; then
    home-manager switch
    doom sync -u
fi
